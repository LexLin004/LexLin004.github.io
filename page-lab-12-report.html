<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Lab 12 Fast Robot - Shihming Lin</title>
        <link href="css/styles.css" rel="stylesheet" />
        <link rel="icon" type="image/x-icon" href="assets/img/project-cover/right_corner_icon.png" />
        <script data-search-pseudo-elements defer src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.29.0/feather.min.js" crossorigin="anonymous"></script>
    </head>
    <body>
        <div id="layoutDefault">
            <div id="layoutDefault_content">
                <main>
                    <!-- Navbar-->
                    <nav class="navbar navbar-marketing navbar-expand-lg bg-white navbar-light">
                        <div class="container px-5">
                            <a class="navbar-brand text-primary" href="index.html"><img class="img-fluid rounded-3" src="assets/img/project-cover/right_corner_icon.png" /></a>
                            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><i data-feather="menu"></i></button>
                            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                                <ul class="navbar-nav ms-auto me-lg-5">
                                    <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                                    <li class="nav-item dropdown dropdown-xl no-caret">
                                        <a class="nav-link dropdown-toggle" id="navbarDropdownDemos" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            Projects
                                            <i class="fas fa-chevron-right dropdown-arrow"></i>
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-end animated--fade-in-up me-lg-n25 me-xl-n15" aria-labelledby="navbarDropdownDemos">
                                            <div class="row g-0">
                                                <div class="col-lg-5 p-lg-3 bg-img-cover overlay overlay-primary overlay-70 d-none d-lg-block" style="background-image: url('assets/img/backgrounds/bg-dropdown-xl.jpg')">
                                                    <div class="d-flex h-100 w-100 align-items-center justify-content-center">
                                                        <div class="text-white text-center z-1">
                                                            <div class="mb-3">Will add a image of robots/embedded systems or other related projects</div>
                                                            <a class="btn btn-white btn-sm text-primary fw-500" href="index.html">Show details</a>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-lg-7 p-lg-5">
                                                    <div class="row">
                                                        <div class="col-lg-6">
                                                            <h6 class="dropdown-header text-primary">Web Applications</h6>
                                                            <a class="dropdown-item" href="http://course-enrollment-lsm.s3-website-us-west-2.amazonaws.com/">Course Registration Service</a>
                                                            <a class="dropdown-item" href="https://serene-refuge-47001.herokuapp.com/">Emaily: A Feedback-Collection App</a>
                                                            <a class="dropdown-item" href="#!">E-commerce</a>
                                                            <div class="dropdown-divider border-0"></div>
                                                            <h6 class="dropdown-header text-primary">Robots</h6>
                                                            <a class="dropdown-item" href="fast-robot-all-project-main-page.html">Fast Robot</a>
                                                            <a class="dropdown-item" href="#!">Design and Control of an Autonomous, <br> 4-Legged Construction Robot</a>
                                                            <a class="dropdown-item" href="https://drive.google.com/file/u/3/d/1nS1tiqPLQ61-NSE5_IbpiMUPlx14oYKk/view?usp=sharing">Low-cost Perception System <br> and Remote Management of <br> an Autonomous Wheelchair</a>
                                                            <a class="dropdown-item" href="https://github.com/LexLin004/RelaxU">RelaxU: A Portable And Wearable Massager Tape <br> For Pain Relief and Muscle Recovery</a>
                                                            <div class="dropdown-divider border-0"></div>
                                                            <h6 class="dropdown-header text-primary">FPGA</h6>
                                                            <a class="dropdown-item" href="https://vanhunteradams.com/DE1/Lorenz/Lorenz.html">Hardware ODE solver with HPS control</a>
                                                            <a class="dropdown-item" href="https://vanhunteradams.com/DE1/Mandelbrot/Mandelbrot.html">Mandelbrot Set Visualizer</a>
                                                            <a class="dropdown-item" href="https://vanhunteradams.com/DE1/Drum/Drum_synthesis.html">Multiprocessor Drum Synthesis</a>
                                                            <div class="dropdown-divider border-0 d-lg-none"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                    <li class="nav-item dropdown dropdown-xl no-caret">
                                        <a class="nav-link dropdown-toggle" id="navbarDropdownPages" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            Personal
                                            <i class="fas fa-chevron-right dropdown-arrow"></i>
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-end me-lg-n20 me-xl-n15 animated--fade-in-up" aria-labelledby="navbarDropdownPages">
                                            <div class="row g-0">
                                                <div class="col-lg-4 p-lg-5">
                                                    <h6 class="dropdown-header text-primary">Education</h6>
                                                    <a class="dropdown-item" href="#!">One</a>
                                                    <a class="dropdown-item" href="#!">Two</a>
                                                    <div class="dropdown-divider border-0"></div>
                                                    <h6 class="dropdown-header text-primary">Engineering Experience</h6>
                                                    <a class="dropdown-item" href="#!">One</a>
                                                    <a class="dropdown-item" href="#!">Two</a>
                                                    <a class="dropdown-item" href="#!">Three</a>
                                                    <div class="dropdown-divider border-0 d-lg-none"></div>
                                                </div>
                                                <div class="col-lg-4 p-lg-5">
                                                    <h6 class="dropdown-header text-primary">Blogs</h6>
                                                    <a class="dropdown-item" href="page-blog-overview.html">Overview</a>
                                                    <a class="dropdown-item" href="page-blog-post.html">Post</a>
                                                    <a class="dropdown-item" href="page-blog-archive.html">Archive</a>
                                                    <div class="dropdown-divider border-0 d-lg-none"></div>
                                                </div>
                                                <div class="col-lg-4 p-lg-5">
                                                    <h6 class="dropdown-header text-primary">Other Design</h6>
                                                    <a class="dropdown-item" href="#!">1</a>
                                                    <a class="dropdown-item" href="#!">2</a>
                                                    <a class="dropdown-item" href="#!">3</a>
                                                    <a class="dropdown-item" href="#!">4</a>
                                                    <a class="dropdown-item" href="#!">5</a>
                                                    <div class="dropdown-divider border-0 d-lg-none"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                    <li class="nav-item dropdown no-caret">
                                        <a class="nav-link dropdown-toggle" id="navbarDropdownDocs" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            Documentation
                                            <i class="fas fa-chevron-right dropdown-arrow"></i>
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-end animated--fade-in-up" aria-labelledby="navbarDropdownDocs">
                                            <a class="dropdown-item py-3" href="https://docs.startbootstrap.com/sb-ui-kit-pro/quickstart" target="_blank">
                                                <div class="icon-stack bg-primary-soft text-primary me-4"><i data-feather="book-open"></i></div>
                                                <div>
                                                    <div class="small text-gray-500">Documentation</div>
                                                    Usage instructions and reference
                                                </div>
                                            </a>
                                            <div class="dropdown-divider m-0"></div>
                                            <a class="dropdown-item py-3" href="https://docs.startbootstrap.com/sb-ui-kit-pro/components" target="_blank">
                                                <div class="icon-stack bg-primary-soft text-primary me-4"><i data-feather="code"></i></div>
                                                <div>
                                                    <div class="small text-gray-500">Components</div>
                                                    Code snippets and reference
                                                </div>
                                            </a>
                                            <div class="dropdown-divider m-0"></div>
                                            <a class="dropdown-item py-3" href="https://docs.startbootstrap.com/sb-ui-kit-pro/changelog" target="_blank">
                                                <div class="icon-stack bg-primary-soft text-primary me-4"><i data-feather="file-text"></i></div>
                                                <div>
                                                    <div class="small text-gray-500">Changelog</div>
                                                    Updates and changes
                                                </div>
                                            </a>
                                        </div>
                                    </li>
                                </ul>
                                <a class="btn fw-500 ms-lg-4 btn-primary" href="fast-robot-all-project-main-page.html">
                                    Back
                                    <i class="ms-2" data-feather="arrow-right"></i>
                                </a>
                            </div>
                        </div>
                    </nav>
                    <section class="bg-light py-10">
                        <div class="container px-5">
                            <div class="row gx-5 justify-content-center">
                                <div class="col-lg-10 col-xl-8">
                                    <div class="single-post">
                                        <h1>Lab 12 report (Path Planning and Execution)</h1>
                                        <p class="lead">In this <a href="https://fastrobotscornell.github.io/FastRobots/labs/Lab12.html">lab</a>,
                                            In this experiment, In that experiment, I made the robot navigate through a set of waypoints in the 
                                            lab environment both quickly and accurately.
                                        <div class="d-flex align-items-center justify-content-between mb-5">
                                            <div class="single-post-meta me-4">
                                                <img class="single-post-meta-img" src="assets/img/project-cover/right_corner_icon.png" />
                                                <div class="single-post-meta-details">
                                                    <div class="single-post-meta-details-name">Shihming Lin</div>
                                                    <div class="single-post-meta-details-date">May 12, 2024</div>
                                                </div>
                                            </div>
                                            <div class="single-post-meta-links">
                                                <a href="https://www.linkedin.com/in/shihming-lin-597008199"><i class="fab fa-linkedin fa-fw"></i></a>
                                                <a href="https://github.com/LexLin004"><i class="fab fa-github fa-fw"></i></a>
                                                <a href="https://github.com/robotconstruction"><i class="fab fa-github fa-fw"></i></a>
                                            </div>
                                        </div>
                                        <div class="single-post-text my-5">
                                            <h2>Path Planning</h2>
                                            <p>
                                                The task is to quickly and accurately pass through a set of waypoints in a known map. 
                                                As shown, the blue lines are walls and obstacles, starting at (-1.2192, -0.9144) in the 
                                                lower left corner and ending at (0, 0).
                                            </p>
                                            <img width=500 class="img-fluid mb-2 rounded" src="assets/img/lab_assets/lab12_assets/map_and_path.png" />
                                            <div class="small text-gray-500">Figure 1: Map and Path</div>
                                            <p>
                                                My planning steps are as follows: <br>
                                                1.&emsp;Set the 0 degree reference direction to the direction the robot will be facing when it starts, 
                                                and the counterclockwise direction to the positive direction. 
                                                I will place the robot in the map + y direction. <br><br>
                                                2.&emsp;For each target waypoint perform the following steps: <br>
                                                    &emsp; - &emsp;2.1 &emsp; Update the current robot position using lab11's localization code. <br>
                                                    &emsp; - &emsp;2.2 &emsp;Calculate the deviation of the vector of the current position and the target point from the 0 degree reference direction,
                                                    and use the PID rotate controller to control the robot to rotate to that deviation.
                                                    Since I used DMP combined with quaternions to calculate the angle, the angle returned by the robot is plausible.
                                                    After testing, the angle error margin was +-1 degree for 20 minutes at rest and +-2 degrees after multiple rotations.
                                                    <br>
                                                    &emsp; - &emsp;2.3 &emsp;After the robot has rotated to the specified angle, set the setpoint to the distance that the ToF sensor will measure at the target point, facing the current angle. 
                                                    <br>
                                                    &emsp; - &emsp;2.4 &emsp;Send this setpoint to the robot and use the pid_distance_controller to control the robot to move toward wall
                                                    <br>
                                                    &emsp; - &emsp;2.5 &emsp;Reach the specified distance and go to the next cycle.
                                            </p>
                                        
                                            <h3>Functions Implemented by Computer</h3>
                                            <h5>Update the Current Robot Position</h5>
                                            <p>
                                                I used code implemented in lab11 to control the robot to rotate in place. 
                                                The robot uses the front ToF sensor to measure every 20 degrees and employs a Bayesian filter to update its position.
                                            </p>
                                            <h5>Angle for Robot Rotation</h5>
                                            <p>In lab6, I implemented the functionality to control the robot to rotate to a specified angle using absolute angle control. 
                                                The robot's target rotation angle is set based on a fixed reference direction (initial direction), rather than relative to its current position. 
                                                For example, if my initial direction is the +y direction, then entering 90 degrees will cause the robot to rotate to the -x direction. 
                                                Entering 90 degrees again will still point the robot to the -x direction. It is only when an angle of 180 degrees is entered that the robot will rotate to the -y direction. 
                                                Therefore, to control the robot to rotate to face the next waypoint, I just need to calculate the deviation between the line connecting the current position to the target 
                                                point and the initial direction, and then pass this value to the robot.
                                                The following is the code implementation:
                                            </p>
                                            <script src="https://gist.github.com/LexLin004/b6fa8f43fa746c65d13a6c2962c995eb.js"></script>

                                            <h5>Distances for Robot Movement</h5>
                                            <p>
                                                In lab5, I implemented the functionality that allows the robot to move to a set_point given relative to a wall. 
                                                For example, when the set_point is 30 cm, the PID controller will control the robot to move to a position 30 cm away from the wall. 
                                                In this lab, I can use this functionality to control the robot to move to waypoints with high precision.
                                                I choose to compute the set point on the computer and then send it to the robot.
                                                Set point depends on the angle of the robot when it reaches the target waypoint, and the position of the waypoint.
                                                I assume that the robot can move in a straight line, therefore, the angle at departure is the angle upon reaching the target point.
                                                I generate a vector at the target point facing the current direction, calculate the intersections of this vector with all obstacles, 
                                                store the closest intersection obtained, and calculate the distance from the intersection to the target point. This is the setpoint. 
                                                This method is similar to a radar simulation. Code and example are as follows:
                                            </p>
                                            <script src="https://gist.github.com/LexLin004/cb61b034fb8d3695e379e49ba0340292.js"></script>
                                            <img width=700 class="img-fluid mb-2 rounded" src="assets/img/lab_assets/lab12_assets/bothinone.png" />
                                            <div class="small text-gray-500">
                                                Figure 2a: Radar Simulation 5deg at pos(0.3048, -0.3048) when robot faces 270deg <br>
                                                Figure 2b: Radar Simulation 360deg at pos(0.3048, -0.3048)
                                            </div>

                                            <h5>Robustness Discussion</h5>
                                            <p>I understand that the robot may not be able to accurately reach the set point. Therefore, after the robot goes 
                                                through the steps above and arrives at the setpoint, its position will be updated again. If the distance 
                                                is greater than 30 cm (considering the difficulty in precisely adjusting the robot's position and localization errors) 
                                                and less than 1 meter (considering that localization may produce outrageously wrong results), the above steps will be 
                                                repeated to approach the waypoint more closely. The code is shown below. <br>
                                                This planning will be limited by whether the robot can travel in a 
                                                straight line, the accuracy of the robot's localization, and the precision of the ToF measurements.
                                            </p>

                                            <script src="https://gist.github.com/LexLin004/b2b042d99b10b70b0877210a24a58e1c.js"></script>
                                            <h3>Functions Implemented by Robot</h3>
                                            <h5>Rotate and Measure</h5>
                                            <p>
                                                After receiving a command from the computer to locate itself, 
                                                the robot will perform rotation and measurement functions, with the code being the same as in lab11.
                                            </p>
                                            <h5>Rotate to target angle</h5>
                                            <p>
                                                After receiving a command from the computer to rotate to a specified angle, the robot will perform 
                                                the rotation function, with the code being the same as in lab11 and lab6. 
                                            </p>
                                            <h5>Move to setpoint</h5>
                                            <p>
                                                After receiving a command from the computer to move forward to a set_point, the robot will perform
                                                the forward movement function, with the code being the same as in lab5.
                                            </p>
                                            
                                            <h2>Demo</h2>
                                            <iframe width="560" height="315" src="https://www.youtube.com/embed/6S049P0UKYM"></iframe>
                                            
                                            <h3>Result</h3>
                                            <h4>Bayer Filter Result</h4>
                                            <h4>Real World Result</h4>

                                            <hr class="my-5" />
                                            <div class="text-center"><a class="btn btn-transparent-dark" href="fast-robot-all-project-main-page.html">Back to All Reports of Fast Robots Labs</a></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="svg-border-rounded text-dark">
                            <!-- Rounded SVG Border-->
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 144.54 17.34" preserveAspectRatio="none" fill="currentColor"><path d="M144.54,17.34H0V0H144.54ZM0,0S32.36,17.34,72.27,17.34,144.54,0,144.54,0"></path></svg>
                        </div>
                    </section>
                </main>
            </div>
<div id="layoutDefault_footer">
                <footer class="footer pt-10 pb-5 mt-auto bg-dark footer-dark">
                    <div class="container px-5">
                        <div class="row gx-5">
                            <div class="col-lg-3">
                                <div class="footer-brand">Shihming Lin</div>
                                <div class="mb-3">Portfolio</div>
                                <div class="icon-list-social mb-5">
                                    <a class="icon-list-social-link" href="#!"><i class="fab fa-instagram"></i></a>
                                    <a class="icon-list-social-link" href="#!"><i class="fab fa-facebook"></i></a>
                                    <a class="icon-list-social-link" href="#!"><i class="fab fa-github"></i></a>
                                    <a class="icon-list-social-link" href="#!"><i class="fab fa-twitter"></i></a>
                                </div>
                            </div>
                            <div class="col-lg-9">
                                <div class="row gx-5">
                                    <div class="col-lg-3 col-md-6 mb-5 mb-lg-0">
                                        <div class="text-uppercase-expanded text-xs mb-4">All Info</div>
                                        <ul class="list-unstyled mb-0">
                                            <li class="mb-2"><a href="#!">Projects</a></li>
                                            <li class="mb-2"><a href="#!">Personal</a></li>
                                            <li class="mb-2"><a href="#!">Documentation</a></li>
                                        </ul>
                                    </div>
                                    <div class="col-lg-3 col-md-6">
                                        <div class="text-uppercase-expanded text-xs mb-4">Legal</div>
                                        <ul class="list-unstyled mb-0">
                                            <li class="mb-2"><a href="#!">Privacy Policy</a></li>
                                            <li class="mb-2"><a href="#!">Terms and Conditions</a></li>
                                            <li><a href="#!">License</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr class="my-5" />
                        <div class="row gx-5 align-items-center">
                            <div class="col-md-6 small">Copyright &copy; LexLin004.github.io 2024</div>
                            <div class="col-md-6 text-md-end small">
                                <a href="#!">Privacy Policy</a>
                                &middot;
                                <a href="#!">Terms &amp; Conditions</a>
                            </div>
                        </div>
                    </div>
                </footer>
            </div>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
        <script src="js/scripts.js"></script>
    </body>
</html>
