<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Lab 3 Fast Robot - Shihming Lin</title>
        <link href="css/styles.css" rel="stylesheet" />
        <link rel="icon" type="image/x-icon" href="assets/img/project-cover/right_corner_icon.png" />
        <script data-search-pseudo-elements defer src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/feather-icons/4.29.0/feather.min.js" crossorigin="anonymous"></script>
    </head>
    <body>
        <div id="layoutDefault">
            <div id="layoutDefault_content">
                <main>
                    <!-- Navbar-->
                    <nav class="navbar navbar-marketing navbar-expand-lg bg-white navbar-light">
                        <div class="container px-5">
                            <a class="navbar-brand text-primary" href="index.html"><img class="img-fluid rounded-3" src="assets/img/project-cover/right_corner_icon.png" /></a>
                            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><i data-feather="menu"></i></button>
                            <div class="collapse navbar-collapse" id="navbarSupportedContent">
                                <ul class="navbar-nav ms-auto me-lg-5">
                                    <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
                                    <li class="nav-item dropdown dropdown-xl no-caret">
                                        <a class="nav-link dropdown-toggle" id="navbarDropdownDemos" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            Projects
                                            <i class="fas fa-chevron-right dropdown-arrow"></i>
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-end animated--fade-in-up me-lg-n25 me-xl-n15" aria-labelledby="navbarDropdownDemos">
                                            <div class="row g-0">
                                                <div class="col-lg-5 p-lg-3 bg-img-cover overlay overlay-primary overlay-70 d-none d-lg-block" style="background-image: url('assets/img/backgrounds/bg-dropdown-xl.jpg')">
                                                    <div class="d-flex h-100 w-100 align-items-center justify-content-center">
                                                        <div class="text-white text-center z-1">
                                                            <div class="mb-3">Will add a image of robots/embedded systems or other related projects</div>
                                                            <a class="btn btn-white btn-sm text-primary fw-500" href="index.html">Show details</a>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="col-lg-7 p-lg-5">
                                                    <div class="row">
                                                        <div class="col-lg-6">
                                                            <h6 class="dropdown-header text-primary">Web Applications</h6>
                                                            <a class="dropdown-item" href="http://course-enrollment-lsm.s3-website-us-west-2.amazonaws.com/">Course Registration Service</a>
                                                            <a class="dropdown-item" href="https://serene-refuge-47001.herokuapp.com/">Emaily: A Feedback-Collection App</a>
                                                            <a class="dropdown-item" href="#!">E-commerce</a>
                                                            <div class="dropdown-divider border-0"></div>
                                                            <h6 class="dropdown-header text-primary">Robots</h6>
                                                            <a class="dropdown-item" href="fast-robot-all-project-main-page.html">Fast Robot</a>
                                                            <a class="dropdown-item" href="#!">Design and Control of an Autonomous, <br> 4-Legged Construction Robot</a>
                                                            <a class="dropdown-item" href="https://drive.google.com/file/u/3/d/1nS1tiqPLQ61-NSE5_IbpiMUPlx14oYKk/view?usp=sharing">Low-cost Perception System <br> and Remote Management of <br> an Autonomous Wheelchair</a>
                                                            <a class="dropdown-item" href="https://github.com/LexLin004/RelaxU">RelaxU: A Portable And Wearable Massager Tape <br> For Pain Relief and Muscle Recovery</a>
                                                            <div class="dropdown-divider border-0"></div>
                                                            <h6 class="dropdown-header text-primary">FPGA</h6>
                                                            <a class="dropdown-item" href="https://vanhunteradams.com/DE1/Lorenz/Lorenz.html">Hardware ODE solver with HPS control</a>
                                                            <a class="dropdown-item" href="https://vanhunteradams.com/DE1/Mandelbrot/Mandelbrot.html">Mandelbrot Set Visualizer</a>
                                                            <a class="dropdown-item" href="https://vanhunteradams.com/DE1/Drum/Drum_synthesis.html">Multiprocessor Drum Synthesis</a>
                                                            <div class="dropdown-divider border-0 d-lg-none"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                    <li class="nav-item dropdown dropdown-xl no-caret">
                                        <a class="nav-link dropdown-toggle" id="navbarDropdownPages" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            Personal
                                            <i class="fas fa-chevron-right dropdown-arrow"></i>
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-end me-lg-n20 me-xl-n15 animated--fade-in-up" aria-labelledby="navbarDropdownPages">
                                            <div class="row g-0">
                                                <div class="col-lg-4 p-lg-5">
                                                    <h6 class="dropdown-header text-primary">Education</h6>
                                                    <a class="dropdown-item" href="#!">One</a>
                                                    <a class="dropdown-item" href="#!">Two</a>
                                                    <div class="dropdown-divider border-0"></div>
                                                    <h6 class="dropdown-header text-primary">Engineering Experience</h6>
                                                    <a class="dropdown-item" href="#!">One</a>
                                                    <a class="dropdown-item" href="#!">Two</a>
                                                    <a class="dropdown-item" href="#!">Three</a>
                                                    <div class="dropdown-divider border-0 d-lg-none"></div>
                                                </div>
                                                <div class="col-lg-4 p-lg-5">
                                                    <h6 class="dropdown-header text-primary">Blogs</h6>
                                                    <a class="dropdown-item" href="page-blog-overview.html">Overview</a>
                                                    <a class="dropdown-item" href="page-blog-post.html">Post</a>
                                                    <a class="dropdown-item" href="page-blog-archive.html">Archive</a>
                                                    <div class="dropdown-divider border-0 d-lg-none"></div>
                                                </div>
                                                <div class="col-lg-4 p-lg-5">
                                                    <h6 class="dropdown-header text-primary">Other Design</h6>
                                                    <a class="dropdown-item" href="#!">1</a>
                                                    <a class="dropdown-item" href="#!">2</a>
                                                    <a class="dropdown-item" href="#!">3</a>
                                                    <a class="dropdown-item" href="#!">4</a>
                                                    <a class="dropdown-item" href="#!">5</a>
                                                    <div class="dropdown-divider border-0 d-lg-none"></div>
                                                </div>
                                            </div>
                                        </div>
                                    </li>
                                    <li class="nav-item dropdown no-caret">
                                        <a class="nav-link dropdown-toggle" id="navbarDropdownDocs" href="#" role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            Documentation
                                            <i class="fas fa-chevron-right dropdown-arrow"></i>
                                        </a>
                                        <div class="dropdown-menu dropdown-menu-end animated--fade-in-up" aria-labelledby="navbarDropdownDocs">
                                            <a class="dropdown-item py-3" href="https://docs.startbootstrap.com/sb-ui-kit-pro/quickstart" target="_blank">
                                                <div class="icon-stack bg-primary-soft text-primary me-4"><i data-feather="book-open"></i></div>
                                                <div>
                                                    <div class="small text-gray-500">Documentation</div>
                                                    Usage instructions and reference
                                                </div>
                                            </a>
                                            <div class="dropdown-divider m-0"></div>
                                            <a class="dropdown-item py-3" href="https://docs.startbootstrap.com/sb-ui-kit-pro/components" target="_blank">
                                                <div class="icon-stack bg-primary-soft text-primary me-4"><i data-feather="code"></i></div>
                                                <div>
                                                    <div class="small text-gray-500">Components</div>
                                                    Code snippets and reference
                                                </div>
                                            </a>
                                            <div class="dropdown-divider m-0"></div>
                                            <a class="dropdown-item py-3" href="https://docs.startbootstrap.com/sb-ui-kit-pro/changelog" target="_blank">
                                                <div class="icon-stack bg-primary-soft text-primary me-4"><i data-feather="file-text"></i></div>
                                                <div>
                                                    <div class="small text-gray-500">Changelog</div>
                                                    Updates and changes
                                                </div>
                                            </a>
                                        </div>
                                    </li>
                                </ul>
                                <a class="btn fw-500 ms-lg-4 btn-primary" href="fast-robot-all-project-main-page.html">
                                    Back
                                    <i class="ms-2" data-feather="arrow-right"></i>
                                </a>
                            </div>
                        </div>
                    </nav>
                    <section class="bg-light py-10">
                        <div class="container px-5">
                            <div class="row gx-5 justify-content-center">
                                <div class="col-lg-10 col-xl-8">
                                    <div class="single-post">
                                        <h1>Lab 3 report</h1>
                                        <p class="lead">In the <a href="https://fastrobotscornell.github.io/FastRobots/labs/Lab3.html">lab 3</a>,
                                            I connected two <a href="https://cdn.sparkfun.com/assets/8/9/9/a/6/VL53L0X_DS.pdf">VL53L1X Time-of-Flight Distance Sensors </a> to the Artemis board. 
                                            Then, I recorded the data from them and tested and discussed about the speed and distance of ToF sensor.</p>
                                        <div class="d-flex align-items-center justify-content-between mb-5">
                                            <div class="single-post-meta me-4">
                                                <img class="single-post-meta-img" src="assets/img/project-cover/right_corner_icon.png" />
                                                <div class="single-post-meta-details">
                                                    <div class="single-post-meta-details-name">Shihming Lin</div>
                                                    <div class="single-post-meta-details-date">Feb 18, 2024</div>
                                                </div>
                                            </div>
                                            <div class="single-post-meta-links">
                                                <!-- <a href="https://www.linkedin.com/in/shihming-lin-597008199"><i class="fab fa-linkedin fa-fw"></i></a> -->
                                                <a href="https://github.com/LexLin004"><i class="fab fa-github fa-fw"></i></a>
                                                <a href="https://github.com/robotconstruction"><i class="fab fa-github fa-fw"></i></a>
                                            </div>
                                        </div>
                                        <div class="single-post-text my-5">
                                            <h2>Part 1: Prelab</h2>
                                            <p>
                                                According to <a href="https://cdn.sparkfun.com/assets/8/9/9/a/6/VL53L0X_DS.pdf">datasheet</a>, the sensor's default I2C address
                                                is 0x52. 
                                                Since the robot will uses two ToF sensors, but the address of the sensor is hardwired on the board, we can only programmatically change the addresses 
                                                or enable the sensors separately by changing the voltage of their shutdown pins. I choose to solder the XSHUT pin of a TOF (tof1) to GPIO 8 of the 
                                                artemis board to change the address, as shown by the grey line in Figure 2. First, I will turn off tof1 and then change the address of tof2. 
                                                Finally, I will turn on tof1 again. Therefore, both sensors can be used simultaneously.
                                            </p>
                                            <img width=500 class="img-fluid mb-2 rounded" src="assets/img/lab_assets/lab3_assets/connection_scheme.png" />
                                            <div class="small text-gray-500">Figure 1: Connection Scheme</div>
                                            <p>
                                                I will mount one sensor in front of the robot and the other in the back of the robot. So obstacles can be seen when the robot is moving forward,
                                                backward, and rotating. But this may make the robot miss obstacles on both sides while moving forward. If the sensors are mounted on the left 
                                                and right sides, the robot loses the front and rear view, so that the robot is prone to hit obstacles while moving. If the sensors are mounted 
                                                on adjacent sides (e.g., front side and right side), both cause the robot to miss obstacles on the other side.
                                            </p>
                                            
                                            <h2>Part 2: Lab tasks</h2>
                                            <h4>Wiring</h4>
                                            <p>According to the Connection Scheme, I soldered the two tof sensors, imu, and my artemis board as shown in Figure 2.</p>
                                            <img width=500 class="img-fluid mb-2 rounded" src="assets/img/lab_assets/lab3_assets/soldering_tof_imu_board.jpg" />
                                            <div class="small text-gray-500">Figure 2: Connection</div>
                                            <p> The address is 0x29 as shown in Figure 3. This is the same as described in <a href="https://www.pololu.com/product/3415"> Pololu website </a>.
                                                Since ToF is a slave device, it only has 7bit address (0x29 = 0101001). However, if an 8-bit representation is used with the read/write bits as least 
                                                significant bits (0 for write and 1 for read), the 7-bit address (0x29) will be shifted one bit to the left and the read/write bit will be appended to 
                                                that address so that the address will be 0x52 = 01010010.
                                            </p>
                                            <img width=500 class="img-fluid mb-2 rounded" src="assets/img/lab_assets/lab3_assets/initTOFaddr.png" />
                                            <div class="small text-gray-500">Figure 3: default I2C address of ToF testing by Apollo3/Wire/Example1_wire_I2C</div>
                                            <h4>Disscusion of ToF sensor performance</h4>
                                            <p>
                                                The ToF sensor has 2 modes: Short(1.3m) and Long(4m).  The short distance mode is more accurate, but the measurement distance is only 1.3m, 
                                            which is suitable for slow-moving robots. The long distance mode of 4m favors fast robots. Although the accuracy in this mode is lower due 
                                            to the noise, when due to the long distance, it enables fast moving robots to react in time. Therefore, I chose to use the long distance mode.<br>
                                            </p>
                                            <p>
                                                I designed a test platform, as shown in Figure 4, with the sensor in a similar position to where it will be on the robot. 
                                            </p>
                                            <img width=200 class="img-fluid mb-2 rounded" src="assets/img/lab_assets/lab3_assets/test_setup.jpg" />
                                            <div class="small text-gray-500">Figure 4: Test Platform</div>
                                            <h6>Sensor range, Accuracy, Repeatability, and Ranging time</h6>
                                            <p>
                                                In the long-range mode and test environment shown in Figure 5, I used the tof sensor to collect data at 10-cm intervals from 
                                                0 cm to 450 cm, with more than 100 data at each distance. I did the above test in using 100ms timing budget and 300ms timing budget.
                                                The mean and standard deviation are shown in figure 6 and 7. 
                                                The range of sensor in this mode is from 5cm - 400cm. Measurements from 10cm to 300cm are accurate. Outside this range, 
                                                the measured values deviate significantly from the actual values. The data from the tests and the code for analyzing the data can be found in this 
                                                <a href="https://github.com/LexLin004/robotcode/blob/main/Lab3_performanceOfsingleTOF.zip">file</a>.
                                            </p>
                                            <img width=200 class="img-fluid mb-2 rounded" src="assets/img/lab_assets/lab3_assets/test_environment.jpg" />
                                            <div class="small text-gray-500">Figure 5: Test Environment</div>
                                            <img width=500 class="img-fluid mb-2 rounded" src="assets/img/lab_assets/lab3_assets/Distance_Measurement_Accuracy.png" />
                                            <div class="small text-gray-500">Figure 6: Distance Measurement Accuracy</div>
                                            <img width=500 class="img-fluid mb-2 rounded" src="assets/img/lab_assets/lab3_assets/Standard_Deviation_of_Distance_Measurements.png" />
                                            <div class="small text-gray-500">Figure 7: Standard Deviation of Distance Measurements</div>

                                            <h4>Demo of 2 ToF sensors working simultaneously</h4>
                                            <p>By using the following code burned into the Artemis board, two ToF sensors can be used simultaneously.</p>
                                            <script src="https://gist.github.com/LexLin004/fc57474975b731fee515498b0bf10157.js"></script>
                                            <img width=500 class="img-fluid mb-2 rounded" src="assets/img/lab_assets/lab3_assets/two_tof_work_demo.png" />
                                            <div class="small text-gray-500">Figure 8: Two ToF sensors work simultaneously</div>

                                            <h4>Disscusion of speed and limiting factor of ToF sensor</h4>
                                            <p>
                                                By adding the following code to loop() to print the Artemis clock to the serial output, I found that my loop was executing 4-5 milliseconds per cycle, 
                                                while the 2 tof sensor was sampling at 85 milliseconds per cycle.
                                                The current limiting factor is the time wasted printing to serial output. This also causes some delay.
                                            </p>
                                            <script src="https://gist.github.com/LexLin004/57c371e7c4ac1f41c2f142f5e8043ae3.js"></script>
                                            <img width=300 class="img-fluid mb-2 rounded" src="assets/img/lab_assets/lab3_assets/demo_sampling_speed.png" />
                                            <div class="small text-gray-500">Figure 9: Demo of Sampling Speed</div>
                                            
                                            <h4>Bluetooth</h4>
                                            <p>I sent the distance measured by the two tof sensors in 5 seconds to my computer via Bluetooth and ploted it as shown in Figure 10. 
                                                The following code is what I wrote in Arduino and JupyterNotebook for sending and receiving 5 seconds of tof sensor data. 
                                                Two tof sensors were mounted on the test platform shown in Figure 4, moving from one wall to another. It can be seen that the distance measured 
                                                by tof1 becomes larger as it moves away from the wall it is facing, while the distance measured by tof2 becomes smaller as it gets closer to the wall it is facing.</p>
                                            <script src="https://gist.github.com/LexLin004/70d3f27c98196b2153acab18c1635e2c.js"></script>
                                            <script src="https://gist.github.com/LexLin004/cc7d9445befb7da0f2918bb8063bb9e4.js"></script>
                                            <iframe width="560" height="315" src="https://www.youtube.com/embed/-lSw-rwW7b4?si=b369DzVqLASXo8vN" ></iframe>
                                            <img width=500 class="img-fluid mb-2 rounded" src="assets/img/lab_assets/lab3_assets/TOF_Measurements_Over_Time.png" />
                                            <div class="small text-gray-500">Figure 10: Plot of 2 ToF data</div>

                                            <h4>Discussion on infrared transmission based sensors</h4>
                                            <p>There several types of IR based sensor. Infrared reflective sensors are low cost, easy to use, and can be applied to close range detection, 
                                                but have limited detection range and are sensitive to surface properties. Time-of-flight (ToF) infrared sensors, on the other hand, 
                                                offer higher accuracy and range by measuring the time it takes for light to reflect back from an object. Their higher accuracy is less 
                                                affected by object properties, making them suitable for use in robotics.</p>
                                            <h4>Sensitivity of sensors to colors and textures</h4>
                                            <p> Since the ToF sensor measures the time of flight of light, it is unaffected by and insensitive to the color of the object as long as the object 
                                                is able to reflect enough light back to the sensor. The ToF sensor is also less sensitive to the surface texture of the object. However, 
                                                if extreme surface conditions are encountered, such as very rough or highly reflective surfaces, the accuracy of the measurement may be affected, 
                                                as rough surfaces may cause the light to scatter, and highly reflective surfaces may cause the light to be reflected away from the sensor.</p>
                                            <p>
                                                As shown in Figure 11, at the same distance, I used the tof sensor to measure its distance from a white vegan leather surface (slightly rough), 
                                                a flesh-colored rubber surface, copper foil, a white stainless steel mug surface (smooth), and a white kitchen towel (rough). The actual distance
                                                 was 16 centimeters and the TOF measurements were all in the 13-16 cm range. Since I was using the long distance mode, I consider this error to 
                                                 be acceptable, and effectively proves that the tof sensor is insensitive to the color and roughness of an object's surface in non-extreme situations.
                                            </p>
                                            <img width=500 class="img-fluid mb-2 rounded" src="assets/img/lab_assets/lab3_assets/diff_surface.png" />
                                            <div class="small text-gray-500">Figure 11: Different surface of object</div>
                                            
                                            <hr class="my-5" />
                                            <div class="text-center"><a class="btn btn-transparent-dark" href="fast-robot-all-project-main-page.html">Back to All Reports of Fast Robots Labs</a></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="svg-border-rounded text-dark">
                            <!-- Rounded SVG Border-->
                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 144.54 17.34" preserveAspectRatio="none" fill="currentColor"><path d="M144.54,17.34H0V0H144.54ZM0,0S32.36,17.34,72.27,17.34,144.54,0,144.54,0"></path></svg>
                        </div>
                    </section>
                </main>
            </div>
<div id="layoutDefault_footer">
                <footer class="footer pt-10 pb-5 mt-auto bg-dark footer-dark">
                    <div class="container px-5">
                        <div class="row gx-5">
                            <div class="col-lg-3">
                                <div class="footer-brand">Shihming Lin</div>
                                <div class="mb-3">Portfolio</div>
                                <div class="icon-list-social mb-5">
                                    <a class="icon-list-social-link" href="#!"><i class="fab fa-instagram"></i></a>
                                    <a class="icon-list-social-link" href="#!"><i class="fab fa-facebook"></i></a>
                                    <a class="icon-list-social-link" href="#!"><i class="fab fa-github"></i></a>
                                    <a class="icon-list-social-link" href="#!"><i class="fab fa-twitter"></i></a>
                                </div>
                            </div>
                            <div class="col-lg-9">
                                <div class="row gx-5">
                                    <div class="col-lg-3 col-md-6 mb-5 mb-lg-0">
                                        <div class="text-uppercase-expanded text-xs mb-4">All Info</div>
                                        <ul class="list-unstyled mb-0">
                                            <li class="mb-2"><a href="#!">Projects</a></li>
                                            <li class="mb-2"><a href="#!">Personal</a></li>
                                            <li class="mb-2"><a href="#!">Documentation</a></li>
                                        </ul>
                                    </div>
                                    <div class="col-lg-3 col-md-6">
                                        <div class="text-uppercase-expanded text-xs mb-4">Legal</div>
                                        <ul class="list-unstyled mb-0">
                                            <li class="mb-2"><a href="#!">Privacy Policy</a></li>
                                            <li class="mb-2"><a href="#!">Terms and Conditions</a></li>
                                            <li><a href="#!">License</a></li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr class="my-5" />
                        <div class="row gx-5 align-items-center">
                            <div class="col-md-6 small">Copyright &copy; LexLin004.github.io 2024</div>
                            <div class="col-md-6 text-md-end small">
                                <a href="#!">Privacy Policy</a>
                                &middot;
                                <a href="#!">Terms &amp; Conditions</a>
                            </div>
                        </div>
                    </div>
                </footer>
            </div>
        </div>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" crossorigin="anonymous"></script>
        <script src="js/scripts.js"></script>
    </body>
</html>
